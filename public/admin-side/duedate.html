<div class="pagetitle d-flex justify-content-between">
  <div>
    <h1>Post New Requirement</h1>
  </div>

  <div class="d-flex align-items-center gap-2">
    <!-- Sorting Dropdown -->
    <div class="dropdown">
      <button class="btn btn-outline-secondary btn-same-size dropdown-toggle" type="button" id="sortDropdown"
        data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-sort-down"></i>
      </button>
      <ul class="dropdown-menu" aria-labelledby="sortDropdown">
        <li><a class="dropdown-item sort-option" data-sort="newest">Newest Posted</a></li>
        <li><a class="dropdown-item sort-option" data-sort="oldest">Oldest Posted</a></li>
      </ul>
    </div>
    <!-- Edit Button -->
    <button class="btn btn-outline-primary btn-same-size" title="Edit">
      <i class="bi bi-pencil-square"></i>
    </button>

    <!-- Delete Button -->
    <button class="btn btn-outline-danger btn-same-size" title="Delete">
      <i class="bi bi-trash"></i>
    </button>

    <!-- Add Button -->
    <button class="btn custom-btn-primary" data-bs-toggle="modal" data-bs-target="#addDeadlineModal">
      <i class="bi bi-plus-circle me-1"></i> Add Requirements
    </button>
  </div>
</div>

<div class="row g-4" id="deadlineContainer">
</div>

<!-- Add Modal -->
<div class="modal fade" id="addDeadlineModal" tabindex="-1" aria-labelledby="addDeadlineLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <form class="modal-content" id="deadlineForm">
      <div class="modal-header bg-dark-purple text-white">
        <h5 class="modal-title" id="addDeadlineLabel">Add New Requirement</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <!-- Requirement Category -->
        <div class="mb-3">
          <label for="requirementType" class="form-label">Requirement Category</label>
          <select class="form-select" id="requirementType" required>
            <option value="">Select Category</option>
            <option value="Initial Requirements">Initial Requirements</option>
            <option value="Pre-Deployment Requirements">Pre-Deployment</option>
            <option value="In-Progress Requirements">In-Progress</option>
            <option value="Final Requirements">Final Requirements</option>
          </select>
        </div>

        <!-- Title -->
        <div class="mb-3">
          <label for="deadlineTitle" class="form-label">Title</label>
          <select class="form-select" id="deadlineTitle" required>
            <option value="">Select Title</option>
          </select>
        </div>

        <!-- Due Date & Time -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="dueDate" class="form-label">Due Date</label>
            <input type="date" class="form-control" id="dueDate" required>
          </div>
          <div class="col-md-6">
            <label for="dueTime" class="form-label">Due Time</label>
            <input type="time" class="form-control" id="dueTime" required>
          </div>
        </div>

        <!-- ✅ Date Posted (Auto) -->
        <div class="mb-3">
          <label class="form-label">Date Posted</label>
          <p id="autoDatePosted" class="form-control-plaintext"></p>
          <!-- hidden input para maisama sa form submission -->
          <input type="hidden" id="datePosted" name="datePosted">
        </div>

        <!-- Notes -->
        <div class="mb-3">
          <label for="notes" class="form-label">Description / Notes</label>
          <textarea class="form-control" id="notes" rows="4"
            placeholder="Include required documents, number of copies, signatures, notarization, etc."></textarea>
        </div>
      </div>

      <div class="modal-footer">
        <button type="submit" class="btn btn-primary">Save & Post</button>
      </div>
    </form>
  </div>
</div>


<!-- Edit Requirement Modal -->
<div class="modal fade" id="editDeadlineModal" tabindex="-1" aria-labelledby="editDeadlineModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-dark-purple text-white">
        <h5 class="modal-title" id="editDeadlineModalLabel">Edit Requirement</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="editRequirementForm">

          <!-- Requirement Type -->
          <div class="mb-3">
            <label for="editRequirementType" class="form-label">Requirement Type</label>
            <select class="form-select" id="editRequirementType" required>
              <option value="">Select Category</option>
              <option value="Initial Requirements">Initial Requirements</option>
              <option value="Pre-Deployment Requirements">Pre-Deployment Requirements</option>
              <option value="In-Progress Requirements">In-Progress Requirements</option>
              <option value="Final Requirements">Final Requirements</option>
            </select>
          </div>

          <!-- Title -->
          <div class="mb-3">
            <label for="editDeadlineTitle" class="form-label">Title</label>
            <select class="form-select" id="editDeadlineTitle" required>
              <option value="">Select Title</option>
            </select>
          </div>

          <!-- Due Date & Time -->
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="editDueDate" class="form-label">Due Date</label>
              <input type="date" class="form-control" id="editDueDate" required>
            </div>
            <div class="col-md-6">
              <label for="editDueTime" class="form-label">Due Time</label>
              <input type="time" class="form-control" id="editDueTime" required>
            </div>
          </div>


          <!-- ✅ Date Posted (not editable) -->
          <div class="mb-3">
            <label for="editDatePosted" class="form-label">Date Posted</label>
            <p id="editDatePosted" class="form-control-plaintext"></p>
          </div>

          <!-- Notes -->
          <div class="mb-3">
            <label for="editNotes" class="form-label">Notes</label>
            <textarea class="form-control" id="editNotes" rows="3"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary" form="editRequirementForm">Save Changes</button>
      </div>
    </div>
  </div>
</div>



<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title"><i class="bi bi-trash3 me-2"></i>Confirm Delete</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        Are you sure you want to delete the selected requirement(s)?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
      </div>
    </div>
  </div>
</div>

<!-- Feedback Modal -->
<div class="modal fade" id="feedbackModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-sm modal-dialog-centered">
    <div class="modal-content bg-dark-purple text-center m-0 p-0">
      <div class="modal-body text-white small">
        <p id="feedbackMessage" class="mb-0"></p>
      </div>
    </div>
  </div>